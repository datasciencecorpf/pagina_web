"use strict";(self.webpackChunkdemo_app=self.webpackChunkdemo_app||[]).push([[755],{5755:function(e,t,n){n.r(t);var s=n(4165),r=n(5861),a=n(885),o=n(7689),c=n(583),i=n(2791),l=n(4202),u=n(595),d=(n(6798),n(9085)),h=n(184);t.default=function(e){var t=e.title,n=(0,i.useContext)(c.S),p=(0,a.Z)(n,2),m=p[0],x=(p[1],(0,i.useState)(null)),f=(0,a.Z)(x,2),j=f[0],v=f[1],g=(0,i.useState)(null),Z=(0,a.Z)(g,2),C=Z[0],b=Z[1],k=(0,i.useState)(""),S=(0,a.Z)(k,2),w=(S[0],S[1]),N=(0,i.useState)(""),y=(0,a.Z)(N,2),T=(y[0],y[1]),A=(0,i.useState)(!0),B=(0,a.Z)(A,2),E=B[0],_=B[1],D=(0,i.useState)(""),F=(0,a.Z)(D,2),O=F[0],R=F[1],U=(0,i.useState)(""),z=(0,a.Z)(U,2),G=z[0],P=z[1],I=(0,i.useState)(""),L=(0,a.Z)(I,2),H=L[0],X=L[1],q=(0,i.useState)(null),J=(0,a.Z)(q,2),K=J[0],M=(J[1],""),Q=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+m}},e.next=3,fetch("/api/users/me",t);case 3:if((n=e.sent).ok){e.next=8;break}w("Something went wrong. Couldn't load the leads"),e.next=13;break;case 8:return e.next=10,n.json();case 10:r=e.sent,v(r.nombre),b(r.apellido);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+m}};var W=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,r,a,o,c,i,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+m}},e.next=3,fetch("/api/projects/".concat("p10","/0"),t);case 3:if((n=e.sent).ok){e.next=8;break}w("El proyecto no se encuentra disponible :("),e.next=26;break;case 8:return e.next=10,n.json();case 10:for(r=e.sent,console.log(r),w("Projecto en ejecuci\xf3n"),w(r),M=(M=r[0].data.split("Documentos Generados\\")[1]).trim(),a=encodeURIComponent(M),o=M.split("\\").at(-1),R(a),P(o),T(r),c=r[0].data.split("|"),i="",l=0;l<c.length;l++)c[l].includes("Documentos del RUC:")&&(i+=c[l]+"\n");X(i),_(!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){Q(),W(),d.Am.success("Se ejecut\xf3 correctamente!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.Z,{}),(0,h.jsx)("div",{className:"has-text-centered m-6"}),(0,h.jsx)("div",{className:"has-text-left m-6",children:(0,h.jsx)("h1",{className:"title",children:"Bienvenid@ "+j+" "+C+" - "+t})}),m?(0,h.jsx)("div",{className:"has-text-centered m-6",children:E?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Z,{}),(0,h.jsx)("p",{children:"Cargando datos..."}),(0,h.jsx)("h",{})]}):(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("h1",{children:[(0,h.jsx)(d.Ix,{}),(0,h.jsx)("button",{onClick:function(){fetch("/return_excel_file/".concat(O),V).then((function(e){var t=e.headers.get("Content-Disposition");return console.log(t),e.blob()})).then((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=G,document.body.appendChild(n),n.click(),n.remove()})).catch((function(e){console.error(e)}))},children:"Descargar"}),(0,h.jsx)("p",{children:H})]})})}):(0,h.jsx)(o.Fg,{to:"/"}),K&&(0,h.jsxs)("div",{className:"has-text-centered m-6",children:[(0,h.jsx)("h2",{children:"Contenido de data_project:"}),(0,h.jsx)("pre",{children:K})]})]})}},595:function(e,t,n){n.d(t,{Z:function(){return r}});n(2791);var s=n(184);var r=function(){return(0,s.jsx)("div",{className:"bar-loading",children:(0,s.jsx)("div",{className:"bar-loading-progress"})})}},6798:function(e,t,n){n(2791);var s=n(9085),r=(n(5462),n(184));t.Z=function(e){var t=e.type,n=e.message;return(0,r.jsxs)("div",{className:"toast-notification ".concat(t),children:[(0,r.jsx)("div",{className:"message",children:n}),(0,r.jsx)("div",{className:"close",onClick:function(){s.Am.dismiss()},children:"X"})]})}}}]);
//# sourceMappingURL=755.6f839d9f.chunk.js.map