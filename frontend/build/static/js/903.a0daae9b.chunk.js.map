{"version":3,"file":"static/js/903.a0daae9b.chunk.js","mappings":"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","sources":["components/BOTS/BotVentaRMS.jsx"],"sourcesContent":["import { Navigate } from \"react-router-dom\";\r\nimport { UserContext } from \"../../context/UserContext\";\r\nimport React ,{ useEffect,useState,useContext}from \"react\";\r\n\r\n\r\nconst BotVentaRMS =  ({ title }) => {\r\n    const [token, setToken] = useContext(UserContext);\r\n    const [username,setUserName] = useState(null);\r\n    const [secondName,setUserSecondName] = useState(null);\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n    const [dataM, setDataM] =  useState(\"\");\r\n   \r\n   \r\n    const getUserdata= async()=>{ \r\n      const requestOptions = {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: \"Bearer \" + token,\r\n          },\r\n        };\r\n       \r\n        \r\n     \r\n      const response =  await fetch(\"/api/users/me\",requestOptions)\r\n      \r\n      // alert(\"Intento\")\r\n      if(!response.ok){\r\n           setErrorMessage(\"Something went wrong. Couldn't load the leads\");\r\n\r\n      } else {\r\n          const data = await response.json();\r\n          setUserName(data.nombre);\r\n          setUserSecondName(data.apellido);\r\n         \r\n            const response_project = await fetch(`/api/projects/${5}`, requestOptions);\r\n            \r\n            if(!response_project.ok){\r\n              setErrorMessage(\"Something went wrong. Couldn't load the leads\");\r\n            } else {\r\n             const data_project = await response_project.json();\r\n             console.log(data_project);\r\n             setDataM(data_project);\r\n             \r\n\r\n             \r\n            //  alert(data_project)\r\n            \r\n        \r\n          }\r\n      }\r\n      \r\n  \r\n      }\r\n      useEffect(() => {\r\n          getUserdata();\r\n        }, []);\r\n      \r\n    \r\n    const handleLogout = () => {\r\n      setToken(null);\r\n    };\r\n    \r\n\r\n    \r\n    const requestDownload = {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      };\r\n      \r\n        function downloadFile() {\r\n          var date = new Date();\r\n\t        var current_date = date.getDate()+\"-\"+(date.getMonth()+1)+\"-\"+ date.getFullYear();\r\n          var current_time = date.getHours()+\"-\"+date.getMinutes()+\"-\"+date.getSeconds();\r\n          \r\n            fetch('/return_excel_file/',requestDownload)\r\n               .then(response => {\r\n                  const disposition = response.headers.get('Content-Disposition');\r\n                  console.log(disposition)\r\n                  return response.blob();\r\n               })\r\n               .then(blob => {\r\n                  var url = window.URL.createObjectURL(blob);\r\n                  var a = document.createElement('a');\r\n                  a.href = url;\r\n                  a.download = \"VentasRms_\"+ username+\"_\"+current_date+\"-\"+current_time+\".xlsx\";\r\n                  document.body.appendChild(a); // append the element to the dom\r\n                  a.click();\r\n                  a.remove(); // afterwards, remove the element\r\n               })\r\n               .catch(error => {\r\n                  console.error(error);\r\n               })\r\n         }\r\n        \r\n\r\n    \r\n\r\n    return (\r\n      <div className=\"has-text-centered m-6\">\r\n        <h1 className=\"title\">{title}</h1>\r\n        \r\n        <p> {username +\" \"+ secondName}</p>\r\n        <form>\r\n  <div className=\"nativeDatePicker\">\r\n    <label for=\"fini\">Fecha de inicio: </label>\r\n    <input type=\"date\" id=\"bday\" name=\"bday\" />\r\n    <span className=\"validity\"></span>\r\n  </div>\r\n  <div className=\"nativeDatePicker\">\r\n    <label for=\"ffin\">Fecha de fin: </label>\r\n    <input type=\"date\" id=\"bday\" name=\"bday\" />\r\n    <span className=\"validity\"></span>\r\n  </div>\r\n  \r\n</form>\r\n        {token ? (\r\n          <h1>Proyecto en ejecucion<p>{dataM}</p></h1>\r\n        ): <Navigate to='/'/>}\r\n        <button method='post'\r\n          onClick={downloadFile }\r\n        >Descargar</button>\r\n        \r\n      </div>\r\n    );\r\n  };\r\n  \r\n\r\nexport default BotVentaRMS;"],"names":["_ref","title","_useContext","useContext","UserContext","_useContext2","_slicedToArray","token","_useState","useState","_useState2","username","setUserName","_useState3","_useState4","secondName","setUserSecondName","_useState5","_useState6","setErrorMessage","_useState7","_useState8","dataM","setDataM","getUserdata","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","requestOptions","response","data","response_project","data_project","wrap","_context","prev","next","method","headers","Authorization","fetch","sent","ok","json","nombre","apellido","concat","console","log","stop","apply","arguments","useEffect","requestDownload","_jsxs","className","children","_jsx","for","type","id","name","Navigate","to","onClick","date","Date","current_date","getDate","getMonth","getFullYear","current_time","getHours","getMinutes","getSeconds","then","disposition","get","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","remove","catch","error"],"sourceRoot":""}