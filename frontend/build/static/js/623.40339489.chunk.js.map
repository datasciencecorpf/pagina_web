{"version":3,"file":"static/js/623.40339489.chunk.js","mappings":"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","sources":["components/BOTS/BotRecetasProduccion.jsx","components/Loading.jsx"],"sourcesContent":["import { Navigate } from \"react-router-dom\";\r\nimport { UserContext } from \"../../context/UserContext\";\r\nimport React ,{ useEffect,useState,useContext}from \"react\";\r\nimport Navbar from \"../NavBar\";\r\nimport Loading from \"../Loading\";\r\n\r\n\r\nconst BotRecetasProduccion = ({ title }) => {\r\n  const [token, setToken] = useContext(UserContext);\r\n  const [username,setUserName] = useState(null);\r\n  const [usuario,setUsuario] = useState(null);\r\n  const [secondName,setUserSecondName] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [dataM, setDataM] =  useState(\"\");\r\n  const [path_file,setPathFile] = useState(\"\");\r\n  const [file_name,setFileName] = useState(\"\");\r\n  const [isLoadingUser, setIsLoadingUser] = useState(true);\r\n\r\n  let path_doc_generate=\"\";\r\n \r\n  const getUserdata= async()=>{ \r\n    const requestOptions = {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n      };\r\n      \r\n    const response =  await fetch(\"/api/users/me\",requestOptions)\r\n    const response_project = await fetch(`/api/projects/${\"p2\"}/-u jneira`, requestOptions)\r\n    if(!response.ok){\r\n         setErrorMessage(\"Something went wrong. Couldn't load the leads\");\r\n    } else {\r\n        const data = await response.json();\r\n        const usuario =data.email;\r\n\r\n        setUserName(data.nombre);\r\n        setUserSecondName(data.apellido);\r\n\r\n        setIsLoadingUser(false);\r\n\r\n       \r\n\r\n    }\r\n    if(!response_project.ok){\r\n      setErrorMessage(\"Something went wrong. Couldn't load the leads\");\r\n    } else {\r\n     const data_project = await response_project.json();\r\n     path_doc_generate= data_project[0].data.split('Documentos Generados\\\\')[1]\r\n     path_doc_generate= path_doc_generate.trim()\r\n     const encodedFilePath = encodeURIComponent(path_doc_generate);\r\n     var file_name_path= path_doc_generate.split(\"\\\\\").at(-1);\r\n     setPathFile(encodedFilePath);\r\n     setFileName(file_name_path);\r\n     setDataM(path_doc_generate);\r\n    \r\n\r\n }\r\n\r\n    }\r\n    useEffect(() => {\r\n        getUserdata();\r\n      }, []);\r\n    \r\n  \r\n  const handleLogout = () => {\r\n    setToken(null);\r\n  };\r\n  const requestDownload = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: \"Bearer \" + token,\r\n    },\r\n  };\r\n  \r\n    function downloadFile() {\r\n      var date = new Date();\r\n      var current_date = date.getDate()+\"-\"+(date.getMonth()+1)+\"-\"+ date.getFullYear();\r\n      var current_time = date.getHours()+\"-\"+date.getMinutes()+\"-\"+date.getSeconds();\r\n\r\n        fetch(`/return_excel_file/${path_file}`,requestDownload)\r\n           .then(response => {\r\n              const disposition = response.headers.get('Content-Disposition');\r\n\r\n              console.log(disposition)\r\n              return response.blob();\r\n           })\r\n           .then(blob => {\r\n              var url = window.URL.createObjectURL(blob);\r\n              var a = document.createElement('a');\r\n              a.href = url;\r\n\r\n              a.download = file_name\r\n              document.body.appendChild(a); // append the element to the dom\r\n              a.click();\r\n              a.remove(); // afterwards, remove the element\r\n           })\r\n           .catch(error => {\r\n              console.error(error);\r\n           })\r\n     }\r\n    \r\n\r\n  return (\r\n    <>\r\n  <Navbar />\r\n  <div className=\"has-text-centered m-6\">\r\n    <h1 className=\"title\">{title}</h1>\r\n    {token + username ? (\r\n      <>\r\n        <p>{username + \" \" + secondName}</p>\r\n        <h1>\r\n          Proyecto en ejecucion\r\n          <p>\r\n            {dataM ? (\r\n              <button method=\"post\" onClick={downloadFile}>\r\n                Descargar\r\n              </button>\r\n            ) : (\r\n              <Loading />\r\n            )  }\r\n          </p>\r\n        </h1>\r\n      </>\r\n    ) : (\r\n      <Navigate to=\"/\" />\r\n    )}\r\n  </div>\r\n</>\r\n\r\n\r\n  );\r\n};\r\n\r\nexport default BotRecetasProduccion;","import React from \"react\";\r\nimport './css/Loading.css'\r\n\r\nfunction Loading() {\r\n  return (\r\n    <div className=\"bar-loading\">\r\n    <div className=\"bar-loading-progress\"></div>\r\n  </div>);\r\n}\r\n\r\nexport default Loading;\r\n"],"names":["_ref","title","_useContext","useContext","UserContext","_useContext2","_slicedToArray","token","_useState","useState","_useState2","username","setUserName","_useState3","_useState4","_useState5","_useState6","secondName","setUserSecondName","_useState7","_useState8","setErrorMessage","_useState9","_useState10","dataM","setDataM","_useState11","_useState12","path_file","setPathFile","_useState13","_useState14","file_name","setFileName","_useState15","_useState16","setIsLoadingUser","path_doc_generate","getUserdata","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","requestOptions","response","response_project","data","data_project","encodedFilePath","file_name_path","wrap","_context","prev","next","method","headers","Authorization","fetch","sent","concat","ok","json","email","nombre","apellido","split","trim","encodeURIComponent","at","stop","apply","arguments","useEffect","requestDownload","_jsxs","_Fragment","children","_jsx","Navbar","className","onClick","date","Date","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","then","disposition","get","console","log","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","remove","catch","error","Loading","Navigate","to"],"sourceRoot":""}