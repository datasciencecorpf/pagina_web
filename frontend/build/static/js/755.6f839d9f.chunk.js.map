{"version":3,"file":"static/js/755.6f839d9f.chunk.js","mappings":"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","sources":["components/BOTS/BotAnalisisCrediticios.jsx","components/Loading.jsx","components/Toast.jsx"],"sourcesContent":["import { Navigate } from \"react-router-dom\";\r\nimport { UserContext } from \"../../context/UserContext\";\r\nimport React, { useEffect, useState, useContext } from \"react\";\r\nimport Navbar from \"../NavBar\";\r\nimport Loading from \"../Loading\";\r\nimport Toast from \"../Toast\";\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nconst BotAnalisisCrediticio = ({ title }) => {\r\n  const [token, setToken] = useContext(UserContext);\r\n  const [username, setUserName] = useState(null);\r\n  const [secondName, setUserSecondName] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [dataM, setDataM] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [path_file, setPathFile] = useState(\"\");\r\n  const [file_name, setFileName] = useState(\"\");\r\n  const [detalle, setDetalle] = useState(\"\");\r\n  const [dataProjectJSON, setDataProjectJSON] = useState(null);\r\n\r\n  let path_doc_generate = \"\";\r\n\r\n  const getUserdata = async () => {\r\n    const requestOptions = {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    };\r\n\r\n    const response = await fetch(\"/api/users/me\", requestOptions)\r\n    if (!response.ok) {\r\n      setErrorMessage(\"Something went wrong. Couldn't load the leads\");\r\n    } else {\r\n      const data = await response.json();\r\n      setUserName(data.nombre);\r\n      setUserSecondName(data.apellido);\r\n\r\n\r\n    }\r\n\r\n  }\r\n  const handleToastNotify = () => {\r\n    toast.success('Se ejecutó correctamente!', {\r\n      position: \"top-right\",\r\n      autoClose: 3000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n    });\r\n  };\r\n\r\n  const requestDownload = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: \"Bearer \" + token,\r\n    },\r\n  };\r\n\r\n  function downloadFile() {\r\n\r\n    fetch(`/return_excel_file/${path_file}`, requestDownload)\r\n      .then(response => {\r\n        const disposition = response.headers.get('Content-Disposition');\r\n\r\n        console.log(disposition)\r\n        return response.blob();\r\n      })\r\n      .then(blob => {\r\n        var url = window.URL.createObjectURL(blob);\r\n        var a = document.createElement('a');\r\n        a.href = url;\r\n\r\n        a.download = file_name\r\n        document.body.appendChild(a); // append the element to the dom\r\n        a.click();\r\n        a.remove(); // afterwards, remove the element\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      })\r\n  }\r\n\r\n  const executeproject = async () => {\r\n    const requestOptions = {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    };\r\n    const response_project = await fetch(`/api/projects/${\"p10\"}/0`, requestOptions)\r\n    if (!response_project.ok) {\r\n      setErrorMessage(\"El proyecto no se encuentra disponible :(\");\r\n\r\n    } else {\r\n      const data_project = await response_project.json();\r\n      \r\n      console.log(data_project);\r\n      setErrorMessage(\"Projecto en ejecución\");\r\n      setErrorMessage(data_project);\r\n      path_doc_generate = data_project[0].data.split('Documentos Generados\\\\')[1]\r\n      path_doc_generate = path_doc_generate.trim()\r\n      const encodedFilePath = encodeURIComponent(path_doc_generate);\r\n      var file_name_path = path_doc_generate.split(\"\\\\\").at(-1);\r\n      setPathFile(encodedFilePath);\r\n      setFileName(file_name_path);\r\n      setDataM(data_project);\r\n      \r\n      var frases = data_project[0].data.split(\"|\"); // Divide el texto en frases separadas\r\n\r\n      var frasesFiltradas = \"\";\r\n\r\n      for (var i = 0; i < frases.length; i++) {\r\n        if (frases[i].includes(\"Documentos del RUC:\")) {\r\n          frasesFiltradas += frases[i] + \"\\n\";\r\n        }\r\n      }\r\n      setDetalle(frasesFiltradas);\r\n      setLoading(false);\r\n\r\n    }\r\n    \r\n\r\n  }\r\n\r\n  \r\n  useEffect(() => {\r\n    getUserdata();\r\n    executeproject();\r\n    handleToastNotify();\r\n    \r\n  }, []);\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"has-text-centered m-6\"></div>\r\n      <div className=\"has-text-left m-6\">\r\n        <h1 className=\"title\">{\"Bienvenid@ \" + username + \" \" + secondName + \" - \" + title}</h1>\r\n      </div>\r\n      {token ? (\r\n        <div className=\"has-text-centered m-6\">\r\n          {loading ? (\r\n            <>\r\n              <Loading />\r\n              <p>Cargando datos...</p>\r\n              <h>{}</h>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <h1>\r\n                <ToastContainer></ToastContainer>\r\n                <button onClick={downloadFile}>\r\n                  Descargar\r\n                </button>\r\n                <p>{detalle}</p>\r\n              </h1>\r\n            </>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <Navigate to='/' />\r\n      )}\r\n          \r\n      \r\n      {dataProjectJSON && (\r\n        <div className=\"has-text-centered m-6\">\r\n          <h2>Contenido de data_project:</h2>\r\n          <pre>{dataProjectJSON}</pre>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BotAnalisisCrediticio;","import React from \"react\";\r\nimport './css/Loading.css'\r\n\r\nfunction Loading() {\r\n  return (\r\n    <div className=\"bar-loading\">\r\n    <div className=\"bar-loading-progress\"></div>\r\n  </div>);\r\n}\r\n\r\nexport default Loading;\r\n","import React from 'react';\r\nimport {  toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n\r\nconst Toast = ({ type, message}) => {\r\n  const handleClose = () => {\r\n    toast.dismiss();\r\n  };\r\n\r\n  return (\r\n    <div className={`toast-notification ${type}`}>\r\n      <div className=\"message\">{message}</div>\r\n      <div className=\"close\" onClick={handleClose}>X</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Toast;\r\n"],"names":["_ref","title","_useContext","useContext","UserContext","_useContext2","_slicedToArray","token","_useState","useState","_useState2","username","setUserName","_useState3","_useState4","secondName","setUserSecondName","_useState5","_useState6","setErrorMessage","_useState7","_useState8","setDataM","_useState9","_useState10","loading","setLoading","_useState11","_useState12","path_file","setPathFile","_useState13","_useState14","file_name","setFileName","_useState15","_useState16","detalle","setDetalle","_useState17","_useState18","dataProjectJSON","path_doc_generate","getUserdata","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","requestOptions","response","data","wrap","_context","prev","next","method","headers","Authorization","fetch","sent","ok","json","nombre","apellido","stop","apply","arguments","requestDownload","executeproject","_ref3","_callee2","response_project","data_project","encodedFilePath","file_name_path","frases","frasesFiltradas","i","_context2","concat","console","log","split","trim","encodeURIComponent","at","length","includes","useEffect","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","_jsxs","_Fragment","children","_jsx","Navbar","className","Loading","ToastContainer","onClick","then","disposition","get","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","remove","catch","error","Navigate","to","type","message"],"sourceRoot":""}