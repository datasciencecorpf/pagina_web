"use strict";(self.webpackChunkdemo_app=self.webpackChunkdemo_app||[]).push([[489],{7489:function(e,a,n){n.r(a),n.d(a,{default:function(){return f}});var s=n(4165),t=n(5861),r=n(2982),o=n(885),l=n(7689),i=n(583),c=n(2791),u=n(4202),d=n(5399),h=JSON.parse('[{"Granja":"GRANJA KM22","Lote":"2304PPKM22-2","AvesInicial":41922,"TotalConsumo":13920,"ConsProm":167.97043720305226,"MUERTES":323,"%Mortalidad":0.007704785077047851,"Despachos":0,"Inventario":41599,"AvgPeso":226.97777777777776,"PesoBascula":0},{"Granja":"GRANJA KM86","Lote":"2304PPKM86-1","AvesInicial":29019,"TotalConsumo":116260,"ConsProm":3226.7146134104905,"MUERTES":1656,"%Mortalidad":0.05706606016747648,"Despachos":7400,"Inventario":19963,"AvgPeso":2135.811111111111,"PesoBascula":16952},{"Granja":"GRANJA KM86","Lote":"2304PPKM86-2","AvesInicial":28900,"TotalConsumo":112100,"ConsProm":3268.2213506971425,"MUERTES":1740,"%Mortalidad":0.060207612456747404,"Despachos":27160,"Inventario":0,"AvgPeso":2265.5555555555557,"PesoBascula":71998},{"Granja":"GRANJA KM86","Lote":"2304PPKM86-3","AvesInicial":29119,"TotalConsumo":120920,"ConsProm":3757.028464147673,"MUERTES":1620,"%Mortalidad":0.055633778632507985,"Despachos":27242,"Inventario":257,"AvgPeso":2411.866666666667,"PesoBascula":75552},{"Granja":"GRANJA KM86","Lote":"2304PPKM86-4","AvesInicial":28600,"TotalConsumo":0,"ConsProm":3803.960714892227,"MUERTES":1617,"%Mortalidad":0.05653846153846154,"Despachos":26611,"Inventario":372,"AvgPeso":2360.477777777778,"PesoBascula":79220},{"Granja":"GRANJA SACACHUM 2","Lote":"2304PPS2-1","AvesInicial":29282,"TotalConsumo":14460,"ConsProm":504.3303885594661,"MUERTES":686,"%Mortalidad":0.023427361519021923,"Despachos":0,"Inventario":28596,"AvgPeso":486.78000000000003,"PesoBascula":0},{"Granja":"GRANJA SACACHUM 2","Lote":"2304PPS2-2","AvesInicial":29000,"TotalConsumo":14830,"ConsProm":520.8132969010692,"MUERTES":603,"%Mortalidad":0.02079310344827586,"Despachos":0,"Inventario":28397,"AvgPeso":556.3083333333334,"PesoBascula":0},{"Granja":"GRANJA SACACHUM 3A","Lote":"2301PPSC3A-1","AvesInicial":28500,"TotalConsumo":121295,"ConsProm":2734.4193461435334,"MUERTES":1138,"%Mortalidad":0.03992982456140351,"Despachos":2,"Inventario":27360,"AvgPeso":2276.789532019705,"PesoBascula":22},{"Granja":"GRANJA SACACHUM 3A","Lote":"2301PPSC3A-2","AvesInicial":28439,"TotalConsumo":125455,"ConsProm":2813.6466049898045,"MUERTES":903,"%Mortalidad":0.03175217131404058,"Despachos":0,"Inventario":27536,"AvgPeso":2530.969581280788,"PesoBascula":0},{"Granja":"GRANJA SACACHUM 3A","Lote":"2301PPSC3A-3","AvesInicial":32000,"TotalConsumo":91260,"ConsProm":1754.9397304034676,"MUERTES":862,"%Mortalidad":0.0269375,"Despachos":0,"Inventario":31138,"AvgPeso":1810.5033333333333,"PesoBascula":0},{"Granja":"GRANJA SACACHUM 3A","Lote":"2301PPSC3A-4","AvesInicial":32000,"TotalConsumo":95230,"ConsProm":1756.002454235835,"MUERTES":959,"%Mortalidad":0.02996875,"Despachos":0,"Inventario":31041,"AvgPeso":1892.3533333333335,"PesoBascula":0},{"Granja":"GRANJA SACACHUM 3B","Lote":"2304PPSC3B-1","AvesInicial":20973,"TotalConsumo":43010,"ConsProm":1144.649026120615,"MUERTES":735,"%Mortalidad":0.03504505793162638,"Despachos":0,"Inventario":20238,"AvgPeso":854.135515873016,"PesoBascula":0},{"Granja":"GRANJA SACACHUM 3B","Lote":"2304PPSC3B-2","AvesInicial":20800,"TotalConsumo":43460,"ConsProm":1166.9775656715356,"MUERTES":854,"%Mortalidad":0.04105769230769231,"Despachos":0,"Inventario":19946,"AvgPeso":861.542857142857,"PesoBascula":0},{"Granja":"GRANJA SACACHUM 3B","Lote":"2304PPSC3B-3","AvesInicial":19437,"TotalConsumo":57480,"ConsProm":2367.8679640054365,"MUERTES":824,"%Mortalidad":0.04239337346298297,"Despachos":360,"Inventario":18253,"AvgPeso":1644.0796296296298,"PesoBascula":570},{"Granja":"GRANJA SACACHUM 3B","Lote":"2304PPSC3B-4","AvesInicial":30000,"TotalConsumo":84000,"ConsProm":2216.8927930768073,"MUERTES":944,"%Mortalidad":0.031466666666666664,"Despachos":0,"Inventario":29056,"AvgPeso":1582.0185185185185,"PesoBascula":0},{"Granja":"GRANJA AZUCAR","Lote":"2304PPAZ-1","AvesInicial":27900,"TotalConsumo":88845,"ConsProm":2240.530255650052,"MUERTES":2430,"%Mortalidad":0.08709677419354839,"Despachos":0,"Inventario":25470,"AvgPeso":1840.2111111111112,"PesoBascula":0},{"Granja":"GRANJA AZUCAR","Lote":"2304PPAZ-2","AvesInicial":28027,"TotalConsumo":91095,"ConsProm":2245.564668996287,"MUERTES":2066,"%Mortalidad":0.0737146323188354,"Despachos":0,"Inventario":25961,"AvgPeso":1852.65,"PesoBascula":0}]'),j=n(184),v=function(e){var a=e.onGranjaSelect,n=e.jsonData,s=(0,c.useState)(""),t=(0,o.Z)(s,2),r=t[0],l=t[1],i=(0,c.useState)([]),u=(0,o.Z)(i,2),d=u[0],h=u[1];(0,c.useEffect)((function(){var e=Array.from(new Set(n.map((function(e){return e.Granja}))));h(e)}),[n]);return(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"granja",children:"Granja: "}),(0,j.jsxs)("select",{className:"granja",value:r,onChange:function(e){var n=e.target.value;l(n),a(n)},children:[(0,j.jsx)("option",{value:"",children:"Seleccione una granja"}),d.map((function(e,a){return(0,j.jsx)("option",{value:e,children:e},a)}))]})]})},p=n(6077),x=n(6157);var m=function(e){var a=e.show,n=e.handleClose,s=e.handleSave,t=e.conversionReal,r=e.conversionRealAjustada,o=e.conversionEstimada,l=e.conversionEstimadaAjustada;return(0,j.jsx)(p.Z,{className:"Dialog",show:a,onHide:n,centered:!0,children:(0,j.jsxs)("div",{className:"Dialog-content",children:[(0,j.jsx)(p.Z.Header,{closeButton:!0,children:(0,j.jsx)(p.Z.Title,{className:"Dialog-title",children:"Confirmar Ajuste"})}),(0,j.jsxs)(p.Z.Body,{children:[(0,j.jsxs)("p",{children:["El valor de la conversi\xf3n estimada es ",(0,j.jsx)("b",{children:o})," y ajustada ",(0,j.jsx)("b",{children:l})]}),(0,j.jsxs)("p",{children:["El valor de la conversi\xf3n real es ",(0,j.jsx)("b",{children:t})," y ajustada ",(0,j.jsxs)("b",{children:[" ",r]})]})]}),(0,j.jsxs)(p.Z.Footer,{children:[(0,j.jsx)(x.Z,{variant:"danger",onClick:n,children:"Cancelar"}),(0,j.jsx)(x.Z,{variant:"dark",onClick:s,children:"Guardar"})]})]})})},A=n(3121),f=function(e){var a=e.title,n=(0,c.useContext)(i.S),p=(0,o.Z)(n,2),x=p[0],f=(p[1],(0,c.useState)(null)),g=(0,o.Z)(f,2),C=g[0],P=g[1],S=(0,c.useState)(null),T=(0,o.Z)(S,2),M=T[0],I=T[1],E=(0,c.useState)(""),G=(0,o.Z)(E,2),Z=G[0],N=G[1],R=(0,c.useState)(""),B=(0,o.Z)(R,2),b=B[0],y=B[1],L=(0,c.useState)(""),F=(0,o.Z)(L,2),U=F[0],D=F[1],w=(0,c.useState)(""),k=(0,o.Z)(w,2),J=k[0],H=k[1],K=(0,c.useState)(""),z=(0,o.Z)(K,2),O=z[0],_=z[1],q=(0,c.useState)(""),Y=(0,o.Z)(q,2),Q=Y[0],V=Y[1],W=(0,c.useState)([]),X=(0,o.Z)(W,2),$=X[0],ee=X[1],ae=(0,c.useState)(""),ne=(0,o.Z)(ae,2),se=ne[0],te=ne[1],re=(0,c.useState)(""),oe=(0,o.Z)(re,2),le=oe[0],ie=oe[1],ce=(0,c.useState)(""),ue=(0,o.Z)(ce,2),de=ue[0],he=ue[1],je=(0,c.useState)(""),ve=(0,o.Z)(je,2),pe=ve[0],xe=ve[1],me=(0,c.useState)(""),Ae=(0,o.Z)(me,2),fe=Ae[0],ge=Ae[1],Ce=(0,c.useState)(""),Pe=(0,o.Z)(Ce,2),Se=Pe[0],Te=Pe[1],Me=(0,c.useState)(""),Ie=(0,o.Z)(Me,2),Ee=Ie[0],Ge=Ie[1],Ze=(0,c.useState)(""),Ne=(0,o.Z)(Ze,2),Re=Ne[0],Be=Ne[1],be=(0,c.useState)([]),ye=(0,o.Z)(be,2),Le=ye[0],Fe=ye[1],Ue=(0,c.useState)(0),De=(0,o.Z)(Ue,2),we=De[0],ke=De[1],Je=(0,c.useState)(!0),He=(0,o.Z)(Je,2),Ke=He[0],ze=He[1],Oe=(0,c.useState)(!1),_e=(0,o.Z)(Oe,2),qe=_e[0],Ye=_e[1],Qe=(0,c.useRef)(null),Ve=(0,c.useRef)(null),We=(0,c.useRef)(null),Xe=function(){return(parseFloat(de)||0)-(parseFloat(Se)||0)-(parseFloat(Ee)||0)},$e=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(a){var n,t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+x}},e.next=4,fetch("/api/projects/".concat("p11","/",a),n);case 4:if((t=e.sent).ok){e.next=9;break}N("Something went wrong. Couldn't load the leads"),e.next=13;break;case 9:return e.next=11,t.json();case 11:r=e.sent,console.log(r);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Error loading data:",e.t0),N("Error loading data. Please try again.");case 19:return e.prev=19,ze(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,15,19,22]])})));return function(a){return e.apply(this,arguments)}}(),ea=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(a,n){var t,r,o,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+x}},r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+x}},e.next=4,fetch("/save_insert/".concat(n,"/","ajustes.json"),r);case 4:return e.sent,e.next=7,fetch("/api/projects/".concat("p11","/",a),t);case 7:if((o=e.sent).ok){e.next=12;break}N("Something went wrong. Couldn't load the leads"),e.next=16;break;case 12:return e.next=14,o.json();case 14:l=e.sent,console.log(l);case 16:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}(),aa=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(){var a,n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+x}},e.next=3,fetch("/api/users/me",a);case 3:if((n=e.sent).ok){e.next=8;break}N("Something went wrong. Couldn't load the leads"),e.next=13;break;case 8:return e.next=10,n.json();case 10:t=e.sent,P(t.nombre),I(t.apellido);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),na=function(e,a,n){return((2750-1e3*parseInt(a)/parseInt(n))/(3500+e/a)+e/a).toFixed(3)},sa=function(){We.current&&clearTimeout(We.current),We.current=setTimeout((function(){window.location.reload()}),3e5)};return(0,c.useEffect)((function(){aa(),$e("-r leerGranjas"),sa(),document.addEventListener("mousemove",(function(){ke(0),sa()}));var e=setInterval((function(){ke((function(e){return e+1e3}))}),1e3);return function(){document.removeEventListener("mousemove",sa),clearInterval(e)}}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.Z,{}),(0,j.jsxs)("div",{className:"has-text-centered m-6",children:[(0,j.jsx)("div",{className:"has-text-left m-6",children:(0,j.jsx)("h1",{className:"title",children:"Bienvenid@ "+C+" "+M+" - "+a})}),x?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{})}):(0,j.jsx)(l.Fg,{to:"/"}),Ke?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.Z,{}),(0,j.jsx)("p",{children:"Cargando datos..."})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{children:["Tiempo de inactividad: ",we/1e3," segundos"]}),(0,j.jsx)(v,{onGranjaSelect:function(e){V(e);var a=h.filter((function(a){return a.Granja===e})).filter((function(e){return!Le.includes(e.Lote)})).map((function(e){return e.Lote}));ee(a)},jsonData:h}),(0,j.jsx)("div",{children:$.length>0&&(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{children:(0,j.jsx)("p",{children:"Lotes de la granja seleccionada: "})}),(0,j.jsx)("div",{children:$.filter((function(e){return!Le.includes(e)})).map((function(e,a){return(0,j.jsx)("button",{className:"button is-warning m-2",onClick:function(){return function(e){te(e);var a=h.filter((function(a){return a.Lote===e}));ie(a.length>0?a[0]:null),he(""),xe(""),Te(""),Ge(""),ge(""),Be("")}(e)},children:(0,j.jsx)("b",{children:e})},a)}))})]})}),(0,j.jsxs)("div",{children:[se&&le&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h2",{children:"Datos del lote seleccionado: "}),(0,j.jsx)("b",{children:(0,j.jsx)("p",{children:le.Lote})}),(0,j.jsx)("div",{className:"table-container",children:(0,j.jsxs)("table",{className:"table is-bordered is-striped is-hoverable",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"Estimado"}),(0,j.jsx)("th",{children:"Real"})]})}),(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{children:[(0,j.jsxs)("td",{style:{textAlign:"left"},children:[(0,j.jsx)("strong",{children:"Aves Inicial:"}),(0,j.jsx)("span",{children:le.AvesInicial})]}),(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"inputGroup",children:[(0,j.jsx)("input",{className:"input",type:"Text",placeholder:"Ingrese ajuste aves",style:{marginLeft:"10px"},value:de,onChange:function(e){var a=e.target.value,n=a.replace(/[^0-9]/g,"");he(n),N(""),0===parseInt(a)?(D("Hay valores en cero."),Ve.current.show()):D("")}}),(0,j.jsx)(A.Z,{ref:Ve,message:U}),(0,j.jsx)("label",{className:"name",htmlFor:"name",id:"label-fname"})]})})]}),(0,j.jsxs)("tr",{children:[(0,j.jsxs)("td",{style:{textAlign:"left"},children:[(0,j.jsx)("strong",{children:"TotalConsumo:"}),(0,j.jsx)("span",{children:le.TotalConsumo})]}),(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"inputGroup",children:[(0,j.jsx)("input",{className:"input",type:"Text",placeholder:"Ingrese ajuste consumo",style:{marginLeft:"10px"},value:pe,onChange:function(e){var a=e.target.value,n=a.replace(/[^0-9]/g,"");xe(n),N(""),0===parseInt(a)?(H("Hay valores en cero."),Ve.current.show()):H("")}}),(0,j.jsx)(A.Z,{ref:Ve,message:J}),(0,j.jsx)("label",{className:"name",htmlFor:"name",id:"label-fname"})]})})]}),(0,j.jsxs)("tr",{children:[(0,j.jsxs)("td",{style:{textAlign:"left"},children:[(0,j.jsx)("strong",{children:"Muertes:"}),(0,j.jsx)("span",{children:le.MUERTES})]}),(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"inputGroup",children:[(0,j.jsx)("input",{className:"input",type:"Text",placeholder:"Ingrese ajuste muertes",style:{marginLeft:"10px"},value:Se,onChange:function(e){var a=e.target.value.replace(/[^0-9]/g,"");Te(a),N("")}}),(0,j.jsx)("label",{htmlFor:"name"})]})})]}),(0,j.jsxs)("tr",{children:[(0,j.jsxs)("td",{style:{textAlign:"left"},children:[(0,j.jsx)("strong",{children:"Despacho:"}),(0,j.jsx)("span",{children:le.Despachos})]}),(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"inputGroup",children:[(0,j.jsx)("input",{className:"input",type:"Text",placeholder:"Ingrese ajuste despachos",style:{marginLeft:"10px"},value:Ee,onChange:function(e){var a=e.target.value,n=a.replace(/[^0-9]/g,"");Ge(n),N(""),0===parseInt(a)?(y("Hay valores en cero."),Qe.current.show()):y("")}}),(0,j.jsx)(A.Z,{ref:Ve,message:b}),(0,j.jsx)("label",{htmlFor:"name"})]})})]}),(0,j.jsxs)("tr",{children:[(0,j.jsxs)("td",{style:{textAlign:"left"},children:[(0,j.jsx)("strong",{children:"Inventario:"}),(0,j.jsx)("span",{children:le.Inventario})]}),(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"inputGroup",children:[(0,j.jsx)("input",{className:"input",type:"Text",placeholder:"Ingrese ajuste inventario",style:{marginLeft:"10px"},value:Xe()}),(0,j.jsx)("label",{htmlFor:"name"})]})})]}),(0,j.jsxs)("tr",{children:[(0,j.jsxs)("td",{style:{textAlign:"left"},children:[(0,j.jsx)("strong",{children:"Peso Bascula:"}),(0,j.jsx)("span",{children:le.PesoBascula})]}),(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"inputGroup",children:[(0,j.jsx)("input",{className:"input",type:"Text",placeholder:"Ingrese ajuste pesaje",style:{marginLeft:"10px"},value:fe,onChange:function(e){var a=e.target.value,n=a.replace(/[^0-9]/g,"");ge(n),0===parseInt(a)?(_("Hay valores en cero."),Ve.current.show()):_("")}}),(0,j.jsx)(A.Z,{ref:Ve,message:O}),(0,j.jsx)("label",{htmlFor:"name"})]})})]})]})]})})]}),le&&(0,j.jsxs)(j.Fragment,{children:[" ",(0,j.jsx)(A.Z,{ref:Ve,message:Z}),(0,j.jsx)("button",{className:"button is-warning",onClick:function(){if(Ye(!0),Be("YES"),Xe()<0)return Ye(!1),N("No se permiten valores negativos en el inventario."),void Ve.current.show()},children:(0,j.jsx)("b",{children:"Generar ajuste"})}),(0,j.jsx)("div",{className:"container mt-3",children:(0,j.jsx)(m,{show:qe,handleClose:function(){Ye(!1),Be("NO")},handleSave:function(){Ye(!1);var e={Estimado:{Lote:le.Lote,Granja:le.Granja,AvesInicial:le.AvesInicial,TotalConsumo:le.TotalConsumo,Muertes:le.MUERTES,DespachoAves:le.Despachos,InventarioAves:le.Inventario,PesoBascula:le.PesoBascula,Liquidacion:Re},Real:{Lote:se,Granja:Q,AvesInicial:parseFloat(de),TotalConsumo:parseFloat(pe),Muertes:parseFloat(Se),DespachoAves:parseFloat(Ee),InventarioAves:parseFloat(Xe()),PesoBascula:parseFloat(fe),Liquidacion:Re},Responsable:C+" "+M};ea("-i insertar",JSON.stringify(e).replace(/"/g,"'")),Fe((function(e){return[].concat((0,r.Z)(e),[se])})),he(""),xe(""),Te(""),Ge(""),ge(""),Be(""),ie("")},conversionReal:(parseFloat(pe)/parseFloat(fe)).toFixed(3),conversionEstimada:(le.TotalConsumo/le.PesoBascula).toFixed(3),conversionEstimadaAjustada:na(le.TotalConsumo,le.PesoBascula,le.Despachos),conversionRealAjustada:na(parseFloat(pe),parseFloat(fe),parseFloat(Ee))})})]})]})]})]})]})}},5399:function(e,a,n){n.d(a,{Z:function(){return t}});n(2791);var s=n(184);var t=function(){return(0,s.jsx)("div",{className:"circle-loading",children:(0,s.jsx)("div",{className:"circle"})})}}}]);
//# sourceMappingURL=489.29002702.chunk.js.map