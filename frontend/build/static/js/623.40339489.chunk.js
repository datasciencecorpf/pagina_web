"use strict";(self.webpackChunkdemo_app=self.webpackChunkdemo_app||[]).push([[623],{1623:function(e,t,n){n.r(t);var a=n(4165),r=n(5861),o=n(885),s=n(7689),c=n(583),i=n(2791),u=n(4202),l=n(595),d=n(184);t.default=function(e){var t=e.title,n=(0,i.useContext)(c.S),h=(0,o.Z)(n,2),p=h[0],f=(h[1],(0,i.useState)(null)),m=(0,o.Z)(f,2),x=m[0],j=m[1],g=(0,i.useState)(null),v=(0,o.Z)(g,2),Z=(v[0],v[1],(0,i.useState)(null)),b=(0,o.Z)(Z,2),k=b[0],S=b[1],w=(0,i.useState)(""),C=(0,o.Z)(w,2),y=(C[0],C[1]),D=(0,i.useState)(""),F=(0,o.Z)(D,2),N=F[0],T=F[1],_=(0,i.useState)(""),E=(0,o.Z)(_,2),R=E[0],U=E[1],z=(0,i.useState)(""),A=(0,o.Z)(z,2),B=A[0],G=A[1],L=(0,i.useState)(!0),M=(0,o.Z)(L,2),O=(M[0],M[1]),P="",H=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n,r,o,s,c,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+p}},e.next=3,fetch("/api/users/me",t);case 3:return n=e.sent,e.next=6,fetch("/api/projects/".concat("p2","/-u jneira"),t);case 6:if(r=e.sent,n.ok){e.next=11;break}y("Something went wrong. Couldn't load the leads"),e.next=18;break;case 11:return e.next=13,n.json();case 13:o=e.sent,o.email,j(o.nombre),S(o.apellido),O(!1);case 18:if(r.ok){e.next=22;break}y("Something went wrong. Couldn't load the leads"),e.next=32;break;case 22:return e.next=24,r.json();case 24:s=e.sent,P=(P=s[0].data.split("Documentos Generados\\")[1]).trim(),c=encodeURIComponent(P),i=P.split("\\").at(-1),U(c),G(i),T(P);case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){H()}),[]);var I={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+p}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.Z,{}),(0,d.jsxs)("div",{className:"has-text-centered m-6",children:[(0,d.jsx)("h1",{className:"title",children:t}),p+x?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:x+" "+k}),(0,d.jsxs)("h1",{children:["Proyecto en ejecucion",(0,d.jsx)("p",{children:N?(0,d.jsx)("button",{method:"post",onClick:function(){var e=new Date;e.getDate(),e.getMonth(),e.getFullYear(),e.getHours(),e.getMinutes(),e.getSeconds(),fetch("/return_excel_file/".concat(R),I).then((function(e){var t=e.headers.get("Content-Disposition");return console.log(t),e.blob()})).then((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=B,document.body.appendChild(n),n.click(),n.remove()})).catch((function(e){console.error(e)}))},children:"Descargar"}):(0,d.jsx)(l.Z,{})})]})]}):(0,d.jsx)(s.Fg,{to:"/"})]})]})}},595:function(e,t,n){n.d(t,{Z:function(){return r}});n(2791);var a=n(184);var r=function(){return(0,a.jsx)("div",{className:"bar-loading",children:(0,a.jsx)("div",{className:"bar-loading-progress"})})}}}]);
//# sourceMappingURL=623.40339489.chunk.js.map